(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"2taP":function(e,n,t){"use strict";var a=t("HJ2O"),i=t.n(a),o=t("A4dA"),r=t.n(o),c=t("f0Pt"),s=t.n(c),l=t("48TQ");t.d(n,"a",function(){return p}),t.d(n,"b",function(){return h});var d=t("fus+"),u=function(e){var n,t=e.method,a=e.url,o=e.data,c=e.isFullURL;return new Promise((n=r()(i.a.mark(function e(n,r){var u,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:log(1,c),a=c?a:"http://39.108.194.159:8080"+a,u=Object(l.a)("token"),p={Authorization:u},s()({method:t,url:a,data:o,timeout:7e3,headers:p}).then(function(e){if(200===e.status&&e.data&&0===e.data.returnCode)if(e.data.encript){var t=e.data.data,a=d.AES.decrypt(t,"lian");t=JSON.parse(a.toString(d.enc.Utf8)),e.data.data=t,n(e.data)}else n(e.data);else if(200===e.status&&e.data&&0!==e.data.returnCode){var i={errCode:e.data.returnCode,errMsg:e.data.returnMsg};r(i)}else r({errCode:-1,errMsg:"请求失败"})}).catch(function(e){log(e),r({errCode:-1,errMsg:"请求失败"})});case 5:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)}))},p=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=Object.keys(n);return e=0===a.length?e:e+"?"+a.map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])}).join("&"),u({url:e,data:{},method:"get",isFullURL:t})},h=function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return u({url:e,data:n,method:"post"})}},I6WA:function(e,n,t){var a=t("SGxG");"string"==typeof a&&(a=[[e.i,a,""]]);t("7B2p")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},K9CR:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var a=function(e){return{type:"SET_TEACHER_QUESTION",value:e}}},MQX1:function(e,n,t){"use strict";t.d(n,"a",function(){return a});var a=function(e){var n=document.createElement("div");return n.innerHTML=e,n.textContent||n.innerText||""}},RdvZ:function(e,n,t){"use strict";t.r(n);var a=t("gx1s"),i=t.n(a),o=(t("JrXl"),t("amw4")),r=t.n(o),c=(t("IWID"),t("0BXe")),s=t.n(c),l=(t("PAZs"),t("yNfe")),d=t.n(l),u=t("HJ2O"),p=t.n(u),h=t("A4dA"),f=t.n(h),m=(t("KW2r"),t("q391")),g=t.n(m),x=t("An8i"),y=t.n(x),v=(t("1Osk"),t("vMRr")),w=t.n(v),b=t("b4l6"),E=t.n(b),k=t("0wiU"),S=t.n(k),_=t("SnMR"),N=t.n(_),C=t("GZrC"),R=t.n(C),z=t("nH91"),I=t.n(z),A=t("ut94"),L=t.n(A),O=t("ee8y"),j=t.n(O),H=t("rdAL"),q=t.n(H),M=t("FFPy"),T=t.n(M),P=(t("48TQ"),t("4yxy")),W=t("K9CR"),D=t("uuwp"),B=t("2taP"),J=t("MQX1"),Q=(t("I6WA"),{0:"#e84118",1:"#00a8ff",2:"#fbc531",3:"#4cd137",4:"#487eb0",5:"#9c88ff"}),U=["/api/english/keke-collection","/api/english/keke-collection-word"],G=function(e){function n(){var e,t;E()(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=N()(this,(e=R()(n)).call.apply(e,[this].concat(i))),j()(L()(L()(t)),"state",{dataBlob:{},dataSource:new w.a.DataSource({rowHasChanged:function(e,n){return e!==n},sectionHeaderHasChanged:function(e,n){return e!==n}}),collection_id:"",collection:{},total:0,collection_questions:[],isTrain:!1,height:document.documentElement.clientHeight,refreshing:!0,isLoading:!1,pageSize:5,pageNo:1,isEnd:0,user_id:""}),j()(L()(L()(t)),"init",function(){var e=function(e){var n={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,a){n[t]=a}),n}(t.props.location.search).collection_id;t.state.collection_id=e,Object(B.a)("".concat(U[0],"/").concat(e)).then(function(e){t.setState({collection:e.data[0]})}),t.fetchWords()}),j()(L()(L()(t)),"fetchWords",function(){if(!t.state.isLoading){t.setState({isLoading:!0});var e={collection_id:t.state.collection_id,equal:1,pageSize:t.state.pageSize,pageNo:t.state.pageNo};Object(B.a)("".concat(U[1]),e).then(function(e){var n=e.data.map(function(e){return e.content=Object(J.a)(e.content),e.analysis=Object(J.a)(e.analysis),e}),a=[].concat(y()(t.state.collection_questions),y()(n));t.rData=e.data.map(function(e,n){return n+(t.state.pageNo-1)*t.state.pageSize});var i=t.state.dataBlob;i["".concat(t.state.pageNo)]=t.rData,t.setState({dataBlob:i,dataSource:t.state.dataSource.cloneWithRowsAndSections(i),collection_questions:a,total:e.count,pageNo:parseInt(e.pageNo)+1,isLoading:!1})}).catch(function(e){g.a.info("认证失效",2)})}}),j()(L()(L()(t)),"handleClick",function(e){t.state.isTrain?t.props.history.push("/train-word?collection_id=".concat(e)):t.props.history.push("/learn-word?collection_id=".concat(e))}),j()(L()(L()(t)),"gotoLast",function(){t.props.history.go(-1)}),j()(L()(L()(t)),"onEndReached",function(e){var n=t.state,a=n.total,i=n.pageNo,o=n.pageSize;a<=i*o-o?t.setState({isEnd:1}):t.fetchWords()}),j()(L()(L()(t)),"onScroll",function(e){t.lv.listviewRef.scrollProperties.offset+t.lv.listviewRef.scrollProperties.visibleLength>=t.lv.listviewRef.scrollProperties.contentLength&&t.onEndReached()}),j()(L()(L()(t)),"phoneticSound",function(e,n){new Audio(imageHost+"/"+e.pronunciation_url).play(),n.stopPropagation()}),j()(L()(L()(t)),"syncReduxData",function(){var e=f()(p.a.mark(function e(n){var a,i,o,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={collection_id:t.state.collection_id,equal:1,pageSize:parseInt(t.state.total),pageNo:1},e.next=3,Object(B.a)("".concat(U[1]),a);case 3:i=e.sent,o=i.data.map(function(e){return e.profile_picture_url="https://jiguangdanci.easylesson.cn//uploads/2b3b57f84122a4aa7d888d171b0ecf7c.jpg",e}),r={list:o,collection_info:t.state.collection,user_id:t.state.user_id,exam_address:window.location.href},t.props.setValue(r),t.props.history.push(n);case 8:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}()),j()(L()(L()(t)),"lookExam",function(){g.a.info("暂不开放")}),j()(L()(L()(t)),"takeExam",function(){t.syncReduxData("/train-keke")}),j()(L()(L()(t)),"handleItem",function(e,n){new Audio(n.pronunciation_url).play()}),t}return I()(n,e),S()(n,[{key:"componentDidMount",value:function(){var e=this.state.height-T.a.findDOMNode(this.lv).offsetTop;this.setState({height:e}),this.rData=[],this.init()}},{key:"render",value:function(){var e=this,n=q.a.createElement(s.a,{mode:"light",onLeftClick:this.gotoLast,leftContent:q.a.createElement(d.a,{type:"left"}),rightContent:[q.a.createElement(d.a,{key:"1",type:"ellipsis"})]},"Come on"),t=q.a.createElement("div",{className:"header-container"},q.a.createElement("h2",null,"可可词汇"),q.a.createElement("div",{className:"header"},q.a.createElement("div",{className:"title"},this.state.collection.name,q.a.createElement("p",null,this.state.collection.note," ",q.a.createElement("span",null,"[",this.state.total,"词汇]")))),q.a.createElement("div",{className:"entry"},q.a.createElement("div",null,q.a.createElement("div",null,"学习模式"),q.a.createElement("div",{className:"btn-container"},q.a.createElement("div",null,q.a.createElement(r.a,{onClick:this.takeExam,style:{background:" RGB(101, 209, 57)"},type:"primary"},"练习")),q.a.createElement("div",null,q.a.createElement(r.a,{onClick:this.lookExam,className:"remember",type:"primary"},"背词")))))),a=(q.a.createElement("div",{className:"list"},this.state.collection_questions.map(function(n){return q.a.createElement("div",{className:"cell",key:JSON.stringify(n),onClick:function(){return e.handleClick(n.id)}},q.a.createElement("div",null,q.a.createElement("p",null,n.word," ",q.a.createElement("span",{className:"grey"},"[",n.phonetic_symbol,"]")," "),q.a.createElement("p",{className:"grey"},n.definition)))})),q.a.createElement(w.a,{useBodyScroll:!0,renderSectionWrapper:function(e){return q.a.createElement(P.StickyContainer,{key:"s_".concat(e,"_c"),className:"sticky-container",style:{zIndex:4}})},renderSectionHeader:function(e,n){return q.a.createElement(P.Sticky,null,function(e){var t=e.style;return q.a.createElement("div",{className:"sticky",style:i()({},t,{zIndex:3,backgroundColor:Q[parseInt(n)%5],color:"white"})},"第 ",n," 组")})},className:"list",ref:function(n){return e.lv=n},dataSource:this.state.dataSource,style:{height:this.state.height},renderRow:function(n,t,a){return q.a.createElement("div",{className:"cell",onClick:function(t){return e.handleItem(t,e.state.collection_questions[parseInt(n)])}},q.a.createElement("div",null,q.a.createElement("p",null,e.state.collection_questions[parseInt(n)].word," ",e.state.collection_questions[parseInt(n)].phonetic_symbol),q.a.createElement("p",{className:"title"},e.state.collection_questions[parseInt(n)].definition)))},pageSize:5,initialListSize:10,onEndReached:this.onEndReached,onEndReachedThreshold:500,onScroll:this.onScroll,renderFooter:function(){return q.a.createElement("div",{style:{lineHeight:"30px",textAlign:"center"}},e.state.isLoading?"Loading...":e.state.isEnd?"到达底部":"已加载")}}));return q.a.createElement("div",{className:"share-word-container"},n,t,a)}}]),n}(H.Component);n.default=Object(D.b)(function(e){return{redux:e.teacherQuestion}},function(e){return{setValue:function(n){e(Object(W.a)(n))}}})(G)},SGxG:function(e,n,t){(e.exports=t("aQ7W")(!1)).push([e.i,".share-word-container {\n  margin-top: 5px;\n}\n.share-word-container .header-container h2 {\n  border-bottom: 1px solid #ddd;\n  line-height: 40px;\n  margin: 20px 10px 0 10px;\n  text-align: center;\n}\n.share-word-container .sticky-container .am-list-item {\n  padding: 0;\n  background-color: transparent;\n}\n.share-word-container .sticky-container .am-list-item * {\n  padding: 0;\n  margin: 0;\n}\n.share-word-container .sticky-container .sticky {\n  text-align: center;\n  line-height: 35px;\n}\n.share-word-container .entry {\n  font-size: 16px;\n  line-height: 40px;\n  padding: 10px 10px 0px 10px;\n  margin-bottom: 20px;\n  border-bottom: 1px solid #ddd;\n}\n.share-word-container .entry .btn-container {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n}\n.share-word-container .entry .btn-container a.am-button {\n  display: inline-block;\n  width: 150px;\n  height: 35px;\n  line-height: 35px;\n  margin-right: 10px;\n  font-size: 15px;\n}\n.share-word-container .header {\n  font-size: 16px;\n  line-height: 40px;\n  padding: 10px 10px 0px 10px;\n  border-bottom: 1px solid #ddd;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.share-word-container .header .title {\n  display: inline-block;\n}\n.share-word-container .header .title p {\n  font-size: 14px;\n  color: #666;\n  margin: 0;\n  margin-left: 5px;\n  line-height: 30px;\n}\n.share-word-container .header .title p span {\n  font-size: 12px;\n  margin-left: 5px;\n  color: #65d139;\n}\n.share-word-container .header .switch {\n  display: inline-block;\n  font-size: 14px;\n}\n.share-word-container .list {\n  background: transparent;\n  padding: 10px 10px 0 10px;\n  font-size: 16px;\n  line-height: 30px;\n}\n.share-word-container .list .am-list-body,\n.share-word-container .list .am-list-body::before {\n  background: transparent;\n}\n.share-word-container .list .cell {\n  border-bottom: 1px solid #ddd;\n  margin-bottom: 10px;\n  padding-bottom: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 14px;\n}\n.share-word-container .list .cell .sound-image {\n  width: 30px;\n  margin-right: 10px;\n  padding: 10px;\n}\n.share-word-container .list .cell .grey {\n  color: #666;\n}\n.share-word-container .list .cell .title {\n  font-size: 14px;\n  color: #65d139;\n}\n.share-word-container .list .cell p {\n  margin: 0;\n}\n.share-word-container .list .cell p span {\n  margin-left: 10px;\n}\n",""])}}]);
//# sourceMappingURL=5.2daa41568fb4b76dc3dd.js.map