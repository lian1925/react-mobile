(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"0cxM":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){return{type:"SET_COLLECTION_WORD",value:e}}},"2taP":function(e,t,n){"use strict";var a=n("HJ2O"),o=n.n(a),r=n("A4dA"),i=n.n(r),c=n("f0Pt"),s=n.n(c),l=n("48TQ");n.d(t,"a",function(){return h}),n.d(t,"b",function(){return p});var d=n("fus+"),u=function(e){var t,n=e.method,a=e.url,r=e.data,c=e.isFullURL;return new Promise((t=i()(o.a.mark(function e(t,i){var u,h;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:log(1,c),a=c?a:"http://39.108.194.159:8080"+a,u=Object(l.a)("token"),h={Authorization:u},s()({method:n,url:a,data:r,timeout:7e3,headers:h}).then(function(e){if(200===e.status&&e.data&&0===e.data.returnCode)if(e.data.encript){var n=e.data.data,a=d.AES.decrypt(n,"lian");n=JSON.parse(a.toString(d.enc.Utf8)),e.data.data=n,t(e.data)}else t(e.data);else if(200===e.status&&e.data&&0!==e.data.returnCode){var o={errCode:e.data.returnCode,errMsg:e.data.returnMsg};i(o)}else i({errCode:-1,errMsg:"请求失败"})}).catch(function(e){log(e),i({errCode:-1,errMsg:"请求失败"})});case 5:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)}))},h=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=Object.keys(t);return e=0===a.length?e:e+"?"+a.map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),u({url:e,data:{},method:"get",isFullURL:n})},p=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return u({url:e,data:t,method:"post"})}},CXtf:function(e,t,n){"use strict";n.r(t),n("fRyC");var a=n("Nmdf"),o=n.n(a),r=(n("IWID"),n("0BXe")),i=n.n(r),c=(n("PAZs"),n("yNfe")),s=n.n(c),l=n("An8i"),d=n.n(l),u=(n("KW2r"),n("q391")),h=n.n(u),p=(n("1Osk"),n("vMRr")),f=n.n(p),g=n("b4l6"),m=n.n(g),w=n("0wiU"),v=n.n(w),x=n("SnMR"),y=n.n(x),E=n("GZrC"),b=n.n(E),N=n("nH91"),C=n.n(N),S=n("ut94"),k=n.n(S),_=n("ee8y"),R=n.n(_),O=(n("uqRu"),n("iQxK")),L=n.n(O),T=n("rdAL"),I=n.n(T),z=n("FFPy"),D=n.n(z),M=n("48TQ"),j=(n("4yxy"),n("0cxM")),A=n("uuwp"),W=n("2taP"),P=(n("x56i"),L.a.Item.Brief,function(e){var t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,a){t[n]=a}),t}),U=["/api/english/collection","/api/english/collection-word"],F=10,H=0,J=function(e){function t(){var e,n;m()(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=y()(this,(e=b()(t)).call.apply(e,[this].concat(o))),R()(k()(k()(n)),"state",{dataSource:new f.a.DataSource({rowHasChanged:function(e,t){return e!==t}}),collection_id:"",collection:{},total:0,collection_words:[],isTrain:!0,height:document.documentElement.clientHeight,refreshing:!0,isLoading:!0,pageSize:10,pageNo:1}),R()(k()(k()(n)),"init",function(){var e=n.props.location.search,t=P(e).collection_id,a=P(e).token;void 0!==a?(Object(M.b)("token",a),n.state.collection_id=t,Object(W.a)("".concat(U[0],"/").concat(t)).then(function(e){n.setState({collection:e.data[0]})}),n.fetchWords()):h.a.info("授权失效",2)}),R()(k()(k()(n)),"fetchWords",function(){n.setState({isLoading:!0});var e={collection_id:n.state.collection_id,pageSize:n.state.pageSize,pageNo:n.state.pageNo};Object(W.a)("".concat(U[1]),e).then(function(e){n.rData=[].concat(d()(n.rData),d()(function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=[],n=0;n<F;n++)t.push("row - ".concat(e*F+n));return t}(++H))),log(e);var t=[].concat(d()(n.state.collection_words),d()(e.data));n.rData=t.map(function(e){return e.word}),n.setState({dataSource:n.state.dataSource.cloneWithRows(n.rData),collection_words:t,total:e.count,pageNo:parseInt(e.pageNo)+1,isLoading:!1}),n.props.setValue({data:t})}).catch(function(e){h.a.info("认证失效",2)})}),R()(k()(k()(n)),"handleClick",function(e){n.state.isTrain?n.props.history.push("/train-word?collection_id=".concat(e)):n.props.history.push("/learn-word?collection_id=".concat(e))}),R()(k()(k()(n)),"gotoLast",function(){n.props.history.go(-1)}),R()(k()(k()(n)),"onEndReached",function(e){log(e);var t=n.state,a=t.total,o=t.pageNo,r=t.pageSize;a<=o*r-r||n.fetchWords()}),R()(k()(k()(n)),"onRefresh",void 0),R()(k()(k()(n)),"onRefresh",function(){log("onrefresh")}),n}return C()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this.state.height-D.a.findDOMNode(this.lv).offsetTop;this.setState({height:e}),this.rData=[],this.init()}},{key:"render",value:function(){var e=this,t=I.a.createElement(i.a,{mode:"light",onLeftClick:this.gotoLast,leftContent:I.a.createElement(s.a,{type:"left"}),rightContent:[I.a.createElement(s.a,{key:"1",type:"ellipsis"})]},"That will get it"),n=I.a.createElement("div",{className:"header-container"},I.a.createElement("h2",null,"词汇库"),I.a.createElement("div",{className:"header"},I.a.createElement("div",{className:"title"},this.state.collection.name,I.a.createElement("p",null,this.state.collection.note," ( total:",this.state.total,")")),I.a.createElement("div",{className:"switch"},"复习与否",I.a.createElement(o.a,{checked:this.state.isTrain,onChange:function(){e.setState({isTrain:!e.state.isTrain})}})))),a=(I.a.createElement("div",{className:"list"},this.state.collection_words.map(function(t){return I.a.createElement("div",{className:"cell",key:JSON.stringify(t),onClick:function(){return e.handleClick(t.id)}},I.a.createElement("div",null,I.a.createElement("p",null,t.word," ",I.a.createElement("span",{className:"grey"},"[",t.phonetic_symbol,"]")," "),I.a.createElement("p",{className:"grey"},t.definition)))})),I.a.createElement(f.a,{useBodyScroll:!0,className:"list",ref:function(t){return e.lv=t},dataSource:this.state.dataSource,style:{height:this.state.height},renderRow:function(t,n,a){return log(a),I.a.createElement("div",{className:"cell",onClick:function(){return e.handleClick(e.state.collection_words[parseInt(a)].id)}},I.a.createElement("div",null,I.a.createElement("p",null,e.state.collection_words[parseInt(a)].word," ",I.a.createElement("span",{className:"grey"},"[",e.state.collection_words[parseInt(a)].phonetic_symbol,"]")," "),I.a.createElement("p",{className:"grey"},e.state.collection_words[parseInt(a)].definition)))},pageSize:5,initialListSize:10,onEndReached:this.onEndReached,renderFooter:function(){return I.a.createElement("div",{style:{lineHeight:"30px",textAlign:"center"}},e.state.isLoading?"Loading...":"到达底部")}}));return I.a.createElement("div",{className:"share-word-container"},t,n,a)}}]),t}(T.Component);t.default=Object(A.b)(function(e){return{redux:e.collectionWord}},function(e){return{setValue:function(t){e(Object(j.a)(t))}}})(J)},mTEZ:function(e,t,n){(e.exports=n("aQ7W")(!1)).push([e.i,".share-word-container {\n  margin-top: 5px;\n}\n.share-word-container .header-container h2 {\n  border-bottom: 1px solid #ddd;\n  line-height: 40px;\n  margin: 20px 10px 0 10px;\n  text-align: center;\n}\n.share-word-container .header {\n  font-size: 20px;\n  line-height: 40px;\n  padding: 10px 10px 0px 10px;\n  border-bottom: 1px solid #ddd;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.share-word-container .header .title {\n  display: inline-block;\n}\n.share-word-container .header .title p {\n  font-size: 14px;\n  color: #666;\n  margin: 0;\n  margin-left: 5px;\n  line-height: 30px;\n}\n.share-word-container .header .switch {\n  display: inline-block;\n  font-size: 14px;\n}\n.share-word-container .list {\n  background: transparent;\n  padding: 10px 10px 0 10px;\n  font-size: 16px;\n  line-height: 30px;\n}\n.share-word-container .list .am-list-body,\n.share-word-container .list .am-list-body::before {\n  background: transparent;\n}\n.share-word-container .list .cell {\n  border-bottom: 1px solid #ddd;\n  margin-bottom: 10px;\n  padding-bottom: 5px;\n}\n.share-word-container .list .cell .grey {\n  color: #666;\n}\n.share-word-container .list .cell p {\n  margin: 0;\n}\n.share-word-container .list .cell p span {\n  margin-left: 10px;\n}\n",""])},x56i:function(e,t,n){var a=n("mTEZ");"string"==typeof a&&(a=[[e.i,a,""]]);n("7B2p")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)}}]);
//# sourceMappingURL=5.c84608c5608b4838bd86.js.map