{"version":3,"sources":["webpack:///./src/views/english/video/index.less","webpack:///./src/views/english/video/index.less?1497","webpack:///./src/views/english/video/data.js","webpack:///./src/views/english/video/index.js","webpack:///./src/redux/video-word/index.js"],"names":["module","exports","__webpack_require__","push","i","aOFR","e","t","n","content","hmr","transform","insertInto","locals","filters","label","name","required","message","placeholder","columns","title","dataIndex","key","render","text","record","index","_react_16_7_0_react_default","a","createElement","tooltip","videoHover","popover","etymaWord","className","stringtomore","width","Link","to","concat","word_id","divider","type","split","map","height","src","controls","searchButtonLoading","source","pagination","filterResult","y","b","r","current","size","_this$state","_this","state","pageSize","props","setValue","updateTable","page","_this$state2","objectSpread_default","values","_this$state3","Object","keys","forEach","item","log","_this$state4","Interceptor","setState","params","pageNo","get","then","res","data","total","count","id","success","catch","err","warn","errMsg","finally","history","h","s","value","this","redux","showSizeChanger","onShowSizeChange","onPaginationSizeChange","onChange","onPaginationChange","showTotal","range","_this$state5","array","tableData","filter","createItem","table","Component","connect","videoWord","dispatch"],"mappings":"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","file":"6.4a4bc8b4682d621a006a.js","sourcesContent":["exports = module.exports = require(\"../../../../node_modules/_css-loader@1.0.1@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".table-collumn {\\n  width: 25%;\\n}\\n.stringtomore-collumn {\\n  cursor: pointer;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js!./index.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/_style-loader@0.23.1@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js!./index.less\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js!./index.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { Component } from \"react\";\nimport {\n  Form,\n  Row,\n  Col,\n  Input,\n  Button,\n  Icon,\n  message,\n  Divider,\n  Tag,\n  Tooltip,\n  Pagination,\n  Popover\n} from \"antd\";\n\nimport { HashRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nimport { log } from \"util/log\";\nimport { stringtomore, numbertostring } from \"util/tool\";\nconst filters = [\n  {\n    label: \"单词\",\n    name: \"word\",\n    required: false,\n    message: \"请输入单词\",\n    placeholder: \"\"\n  },\n  {\n    label: \"句子\",\n    name: \"exampleSat\",\n    required: false,\n    message: \"请输入单词\",\n    placeholder: \"\"\n  },\n  {\n    label: \"注释\",\n    name: \"chineseInterpretation\",\n    required: false,\n    message: \"请输入单词\",\n    placeholder: \"\"\n  }\n];\nconst columns = [\n  {\n    title: \"序号\",\n    dataIndex: \"id\",\n    key: \"id\"\n  },\n  {\n    title: \"单词\",\n    dataIndex: \"word\",\n    key: \"word\"\n  },\n  {\n    title: \"视频\",\n    dataIndex: \"aliVideoUrl\",\n    key: \"aliVideoUrl\",\n    render: (text, record, index) => {\n      return <Tooltip title={text}>{videoHover(text)}</Tooltip>;\n    }\n  },\n  {\n    title: \"注释\",\n    dataIndex: \"chineseInterpretation\",\n    key: \"chineseInterpretation\",\n    render: (text, record, index) => {\n      return (\n        <Popover content={etymaWord(text)} title=\"Title\">\n          <span className=\"stringtomore-collumn\">{stringtomore(text)}</span>\n        </Popover>\n      );\n    }\n  },\n  {\n    title: \"句子\",\n    key: \"exampleSat\",\n    dataIndex: \"exampleSat\",\n    render: (text, record, index) => {\n      return (\n        <Popover content={etymaWord(text)} title=\"详情\">\n          <span className=\"stringtomore-collumn\">{stringtomore(text)}</span>\n        </Popover>\n      );\n    }\n  },\n  {\n    title: \"词根\",\n    key: \"etymaWord\",\n    dataIndex: \"etymaWord\",\n    render: (text, record, index) => {\n      return (\n        <Popover content={etymaWord(text)} title=\"详情\">\n          <span className=\"stringtomore-collumn\">{stringtomore(text)}</span>\n        </Popover>\n      );\n    }\n  },\n  {\n    title: \"词组\",\n    key: \"wordGroup\",\n    dataIndex: \"wordGroup\",\n    render: (text, record, index) => {\n      return (\n        <Popover content={etymaWord(text)} title=\"详情\">\n          <span className=\"stringtomore-collumn\">{stringtomore(text)}</span>\n        </Popover>\n      );\n    }\n  },\n  {\n    title: \"操作\",\n    key: \"action\",\n    width: \"120px\",\n    render: (text, record) => (\n      <span>\n        <Link to={`/video-english/detail?${record.word_id}`}>详情</Link>\n        <Divider type=\"vertical\" />\n        <Link to={`/video-english/edit?${record.word_id}`}>编辑</Link>\n      </span>\n    )\n  }\n];\nconst etymaWord = text => (\n  <div>\n    {text.split(\"\\n\").map((i, key) => {\n      return <div key={key}>{i}</div>;\n    })}\n  </div>\n);\n\nconst videoHover = text => (\n  <video width=\"250\" height=\"auto\" src={text} controls />\n);\nexport { filters, columns };\n","import React, { Component } from \"react\";\nimport { setValue } from \"@/redux/video-word\";\nimport { connect } from \"react-redux\";\nimport {\n  Form,\n  Row,\n  Col,\n  Input,\n  Button,\n  Icon,\n  message,\n  Divider,\n  Tag,\n  Tooltip,\n  Pagination\n} from \"antd\";\nimport Filter from \"co/filter\";\nimport Table from \"co/table\";\nimport \"./index.less\";\n// import { Table, Divider, Tag } from \"antd\";\n\nimport { get, post } from \"util/fetch\";\n\nimport { log } from \"util/log\";\nimport { stringtomore, numbertostring } from \"util/tool\";\n\nimport { filters, columns } from \"./data\";\nclass index extends Component {\n  state = {\n    searchButtonLoading: false,\n    source: [],\n    pagination: {},\n    filterResult: {}\n  };\n\n  componentDidMount() {\n    const pagination = {\n      current: this.props.redux.pagination.current,\n      pageSize: this.props.redux.pagination.pageSize,\n      showSizeChanger: true,\n      onShowSizeChange: this.onPaginationSizeChange,\n      onChange: this.onPaginationChange,\n      showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} items`\n    };\n    const { filterResult } = this.props.redux;\n    this.state.pagination = pagination;\n    this.state.filterResult = filterResult;\n    this.updateTable();\n  }\n  onPaginationSizeChange = (current, size) => {\n    let { pagination, filterResult } = this.state;\n    pagination.pageSize = size;\n    this.state.pagination = pagination;\n    this.props.setValue({ pagination });\n    this.updateTable();\n  };\n  onPaginationChange = (page, pageSize) => {\n    let { pagination, filterResult } = this.state;\n    pagination = { ...pagination, current: page, pageSize };\n    this.state.pagination = pagination;\n    this.props.setValue({ pagination });\n\n    this.updateTable();\n  };\n  filterResult = values => {\n    // log(values);\n    let { pagination, filterResult } = this.state;\n    pagination.current = 1;\n    filterResult = values;\n    Object.keys(filterResult).forEach(item => {\n      if (!filterResult[item]) {\n        filterResult[item] = \"\";\n      }\n    });\n    log(filterResult);\n    this.state.filterResult = filterResult;\n    this.state.pagination = pagination;\n    this.props.setValue({ pagination, filterResult });\n    this.updateTable();\n  };\n  updateTable = () => {\n    const { pagination, filterResult } = this.state;\n    log(1, pagination, filterResult);\n    if (!this.Interceptor()) {\n      return;\n    }\n    this.setState({\n      searchButtonLoading: true\n    });\n    let params = {\n      pageNo: pagination.current,\n      pageSize: pagination.pageSize,\n      ...filterResult\n    };\n    // params = Object.assign({}, params, values);\n    log(params);\n\n    get(\"/api/english/word\", params)\n      .then(res => {\n        log(2, res.data);\n        pagination.total = res.data.count;\n        const source = (res.data.data || []).map((item, index) => {\n          const temp = {\n            // key: \"0\" + (index + 1),\n            // id: numbertostring(index + 1),\n            id: (pagination.current - 1) * pagination.pageSize + index + 1,\n            ...item\n          };\n          return temp;\n        });\n        this.setState({\n          source,\n          pagination\n        });\n        message.success(\"查询成功\");\n      })\n      .catch(err => {\n        log(3, err);\n        message.warn(err.errMsg);\n      })\n      .finally(() => {\n        this.setState({\n          searchButtonLoading: false\n        });\n      });\n  };\n  Interceptor = () => {\n    return true;\n  };\n\n  createItem = () => {\n    this.props.history.push(\"/video-english/create\");\n  };\n  render() {\n    const {\n      searchButtonLoading,\n      source,\n      pagination,\n      filterResult\n    } = this.state;\n    const array = { filters, searchButtonLoading, values: filterResult };\n    const tableData = { columns, source, pagination };\n    return (\n      <div>\n        <Filter\n          array={array}\n          filterResult={this.filterResult}\n          createItem={this.createItem}\n        />\n        <Table data={tableData} />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  redux: state.videoWord\n});\nconst mapDispatchToProps = dispatch => {\n  return {\n    setValue: value => {\n      dispatch(setValue(value));\n    }\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(index);\n","export const setValue = value => ({\n  type: \"SET_VIDEO_WORD\",\n  value\n});\n"],"sourceRoot":""}