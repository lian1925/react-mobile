(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"2taP":function(t,e,n){"use strict";var a=n("NTxs"),i=n.n(a),o=n("o2MN"),r=n.n(o),s=n("f0Pt"),l=n.n(s),c=n("48TQ");n.d(e,"a",function(){return d}),n.d(e,"b",function(){return h});var u=n("fus+"),p=function(t){var e=t.method,n=t.url,a=t.data,o=t.isFullURL;return new Promise(function(){var t=r()(i.a.mark(function t(r,s){var p,d;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:log(1,o),n=o?n:"http://39.108.194.159:8080"+n,p=Object(c.a)("token"),d={Authorization:p},l()({method:e,url:n,data:a,timeout:7e3,headers:d}).then(function(t){if(200===t.status&&t.data&&0===t.data.returnCode)if(t.data.encript){var e=t.data.data,n=u.AES.decrypt(e,"lian");e=JSON.parse(n.toString(u.enc.Utf8)),t.data.data=e,r(t.data)}else r(t.data);else if(200===t.status&&t.data&&0!==t.data.returnCode){var a={errCode:t.data.returnCode,errMsg:t.data.returnMsg};s(a)}else s({errCode:-1,errMsg:"请求失败"})}).catch(function(t){log(t),s({errCode:-1,errMsg:"请求失败"})});case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())},d=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=Object.keys(e);return t=0===a.length?t:t+"?"+a.map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&"),p({url:t,data:{},method:"get",isFullURL:n})},h=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return p({url:t,data:e,method:"post"})}},"6qYX":function(t,e,n){var a=n("J5KQ");"string"==typeof a&&(a=[[t.i,a,""]]);n("7B2p")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(t.exports=a.locals)},Cs0Q:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a=function(t){return{type:"SET_KEKE_TRAIN",value:t}}},J5KQ:function(t,e,n){(t.exports=n("aQ7W")(!1)).push([t.i,".train-keke-container {\n  margin-top: 5px;\n}\n.train-keke-container .tip {\n  width: 50px;\n  height: 50px;\n  border-radius: 25px;\n  background: #00a8ff;\n  text-align: center;\n  color: white;\n  line-height: 50px;\n  float: right;\n  margin-right: 20px;\n}\n.train-keke-container .am-navbar-title {\n  color: #fff;\n}\n.train-keke-container .pagination {\n  margin: 20px;\n}\n.train-keke-container .content {\n  margin-top: 10px;\n}\n.train-keke-container .content .image {\n  position: relative;\n  font-size: 22px;\n}\n.train-keke-container .content .image img {\n  width: 100%;\n  height: auto;\n  border-radius: 5px;\n}\n.train-keke-container .content .image .sound-image {\n  width: 30px;\n  position: absolute;\n  right: 40px;\n  bottom: 25px;\n}\n.train-keke-container .content .image .word {\n  position: absolute;\n  left: 20px;\n  bottom: 55px;\n  padding: 0 5px;\n  color: #fff;\n}\n.train-keke-container .content .image .phonetic {\n  font-size: 18px;\n  position: absolute;\n  left: 20px;\n  bottom: 25px;\n  color: #fff;\n  padding: 0 3px;\n  line-height: 25px;\n  background: #fff;\n}\n.train-keke-container .content .image img {\n  color: #fff;\n}\n.train-keke-container .content .cell {\n  margin: 0 20px;\n  line-height: 40px;\n  border-bottom: 1px solid #ddd;\n}\n.train-keke-container .content .spell-title {\n  line-height: 40px;\n  display: flex;\n  justify-content: space-between;\n  margin: 0 20px;\n  border-bottom: 1px solid #ddd;\n}\n.train-keke-container .content .spell-title img {\n  display: inline-block;\n  width: 22px;\n}\n.train-keke-container .content .spell-title .spell {\n  font-size: 26px;\n  font-weight: 500;\n  color: #1f8ffb;\n  background: transparent;\n  border: 1px solid #1f8ffb;\n  height: 35px !important;\n  min-height: 30px;\n  border-radius: 5px;\n}\n.train-keke-container .content .spell-control {\n  margin: 20px 10px;\n}\n.train-keke-container .content .spell-control .button {\n  width: 20%;\n  display: inline-block;\n  font-size: 22px;\n  margin-bottom: 5px;\n}\n",""])},vfu8:function(t,e,n){"use strict";n.r(e),n("JrXl");var a=n("amw4"),i=n.n(a),o=(n("zAxZ"),n("m0Fu")),r=n.n(o),s=(n("z6Jr"),n("ab6J")),l=n.n(s),c=(n("IWID"),n("0BXe")),u=n.n(c),p=(n("PAZs"),n("yNfe")),d=n.n(p),h=(n("KW2r"),n("q391")),f=n.n(h),m=n("Pjwa"),g=n.n(m),k=n("2cji"),w=n.n(k),b=n("sp3j"),v=n.n(b),x=n("vZkh"),_=n.n(x),y=n("+KCP"),C=n.n(y),E=n("rWUz"),T=n.n(E),S=n("ukVl"),N=n.n(S),L=(n("uqRu"),n("iQxK")),A=n.n(L),j=n("rdAL"),I=n.n(j),P=n("2taP"),z=(n("6qYX"),n("Cs0Q")),B=n("uuwp"),J=(A.a.Item.Brief,"https://jiguangdanci.easylesson.cn"),M=0,K={prevText:"Prev",nextText:"Next"},O={0:"#e84118",1:"#00a8ff",2:"#fbc531",3:"#4cd137",4:"#487eb0",5:"#9c88ff"},Q="abcdefghijklmnopqrstuvwxyz".split(""),R=0,U=[],q=0,W=function(t){function e(){var t,n;g()(this,e);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=v()(this,(t=_()(e)).call.apply(t,[this].concat(i))),N()(T()(T()(n)),"state",{word:n.props.kekeTrain.wordList[0],sentence_sound:{},phonetic_sound:{},collection_words:n.props.kekeTrain.wordList,current:1,spelling:"",spell_button:[],selected_letters:[],isTip:!0}),N()(T()(T()(n)),"init",function(){var t=function(t){var e={};return n.props.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,a){e[n]=a}),e}().collection_id;Object(P.a)("".concat("/api/english/regular","/").concat(t)).then(function(t){var e=new Audio(J+"/"+t.data[0].sample_sentence_audio),a=new Audio(J+"/"+t.data[0].pronunciation_url),i=new Audio("http://img.tukuppt.com/origin_music/00/85/00/mp3-5b9c6af66c768107.mp3");n.setState({sentence_sound:e,phonetic_sound:a,button_sound:i,word:t.data[0]}),n.getButtonItems(t.data[0].word.word)}).catch(function(t){}),(n.props.redux.list||[]).map(function(e,a){e.id==t&&n.setState({current:a+1})})}),N()(T()(T()(n)),"gotoLast",function(){n.props.history.go(-1)}),N()(T()(T()(n)),"sentenceSound",function(){n.state.sentence_sound.playbackRate=1.5,n.state.sentence_sound.play()}),N()(T()(T()(n)),"phoneticSound",function(){n.state.phonetic_sound.play()}),N()(T()(T()(n)),"handlePaginationChange",function(t){U.push(R),R=0,log(U);var e=T()(T()(n));if(t>n.props.kekeTrain.wordList.length)f.a.info("已达终点",.5,function(){var t={tipCountList:U};n.props.setValue(t),e.props.history.push("/keke-chart")});else{log(t-1);var a=new Audio(n.props.kekeTrain.wordList[t-1].pronunciation_url);a.addEventListener("ended",function(){1<=M?(e.setState({isTip:!1}),M=0):(M++,this.play())},!1),a.play();var i=new Audio("http://img.tukuppt.com/origin_music/00/85/00/mp3-5b9c6af66c768107.mp3");n.setState({current:t,phonetic_sound:a,button_sound:i,selected_letters:[],spelling:"",word:n.props.kekeTrain.wordList[t-1],isTip:!0}),n.getButtonItems(n.props.kekeTrain.wordList[t-1].word)}}),N()(T()(T()(n)),"getButtonItems",function(t){var e=t.split(""),a=Math.floor(Math.random()*(11+t.length)),i=a+15-t.length,o=Q.slice(a,i).concat(e).sort(function(){return.5-Math.random()});n.setState({spell_button:o})}),N()(T()(T()(n)),"handleClickButton",function(t){var e=n.state,a=e.selected_letters,i=e.spell_button,o=e.spelling,r=e.current;e.button_sound,a.push(t),o+=i[t],n.state.button_sound.play(),n.setState({selected_letters:a,spelling:o}),o===n.state.word.word&&f.a.info("拼写成功",1,function(){n.handlePaginationChange(r+1)})}),N()(T()(T()(n)),"handleSpell",function(t){var e=t;n.setState({spelling:e},function(){n.state.button_sound.play()}),e===n.state.word.word&&f.a.info("拼写成功",1,function(){n.handlePaginationChange(n.state.current+1)})}),N()(T()(T()(n)),"deleteLetter",function(){n.state.button_sound.play();var t=n.state,e=t.selected_letters,a=(t.spell_button,t.spelling);e.pop(),a=a.slice(0,-1),n.setState({selected_letters:e,spelling:a})}),N()(T()(T()(n)),"showTip",function(){R++;var t=T()(T()(n)),e=new Audio(n.state.word.pronunciation_url);e.addEventListener("ended",function(){1<=M?(t.setState({isTip:!1}),M=0):(M++,this.play())},!1),e.play(),n.spellCell.focus(),n.setState({isTip:!0}),setTimeout(function(){n.spellCell.focus()},3e3)}),n}return C()(e,t),w()(e,[{key:"componentWillUnmount",value:function(){var t=new Date-q,e={duration:t=parseInt(t/1e3)};this.props.setValue(e)}},{key:"componentDidMount",value:function(){q=new Date,U=[];var t=this;this.spellCell.focus(),this.getButtonItems(this.state.word.word);var e=new Audio("http://img.tukuppt.com/origin_music/00/85/00/mp3-5b9c6af66c768107.mp3"),n=new Audio(this.state.word.pronunciation_url);n.addEventListener("ended",function(){1<=M?(t.setState({isTip:!1}),M=0):(M++,this.play())},!1),n.play(),this.setState({button_sound:e,phonetic_sound:n})}},{key:"render",value:function(){var t=this,e=I.a.createElement(u.a,{style:{backgroundColor:O[this.state.current%5],color:"#fff"},mode:"light",onLeftClick:this.gotoLast,leftContent:I.a.createElement(d.a,{type:"left"}),rightContent:[I.a.createElement(d.a,{key:"1",type:"ellipsis"})]},"拼写单词"),n=I.a.createElement("div",{className:"pagination"},I.a.createElement(l.a,{total:(this.props.kekeTrain.wordList||[]).length,current:this.state.current,locale:K,onChange:this.handlePaginationChange})),a=I.a.createElement("div",{className:"content"},I.a.createElement("div",{className:"image"},I.a.createElement("img",{src:this.state.word.profile_picture_url,alt:""}),I.a.createElement("div",{className:"word",style:{backgroundColor:O[this.state.current%5],display:this.state.isTip?"block":"none"}},this.state.word.word),I.a.createElement("div",{className:"phonetic",style:{backgroundColor:O[this.state.current%5]}},this.state.word.phonetic_symbol),I.a.createElement("img",{style:{backgroundColor:O[this.state.current%5]},className:"sound-image",src:"/images/sound.png",alt:"",onClick:this.phoneticSound})),I.a.createElement("div",{className:"cell"},this.state.word.definition),I.a.createElement("div",{className:"spell-title"},I.a.createElement("span",null,"拼写"),I.a.createElement(r.a,{className:"spell",ref:function(e){t.spellCell=e},value:this.state.spelling,onChange:this.handleSpell}),I.a.createElement("div",null,I.a.createElement("img",{src:"/images/delete.png",alt:"",onClick:this.deleteLetter}))),I.a.createElement("div",{className:"spell-control"},this.state.spell_button.map(function(e,n){return I.a.createElement(i.a,{className:"button",disabled:t.state.selected_letters.includes(n),key:JSON.stringify(e)+n,onClick:function(){return t.handleClickButton(n)}},e)}))),o=I.a.createElement("div",{onClick:this.showTip,className:"tip"},"提示");return I.a.createElement("div",{className:"train-keke-container"},e,a,n,o)}}]),e}(j.Component);e.default=Object(B.b)(function(t){return{kekeTrain:t.kekeTrain}},function(t){return{setValue:function(e){t(Object(z.a)(e))}}})(W)}}]);
//# sourceMappingURL=9.cad25fddaca726a69e9bcc23a66cf7a0.js.map