(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"2taP":function(n,e,t){"use strict";var a=t("NTxs"),r=t.n(a),o=t("o2MN"),i=t.n(o),c=t("f0Pt"),s=t.n(c),l=t("48TQ");t.d(e,"a",function(){return p}),t.d(e,"b",function(){return h});var d=t("fus+"),u=function(n){var e=n.method,t=n.url,a=n.data,o=n.isFullURL;return new Promise(function(){var n=i()(r.a.mark(function n(i,c){var u,p;return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:log(1,o),t=o?t:"http://39.108.194.159:8080"+t,u=Object(l.a)("token"),p={Authorization:u},s()({method:e,url:t,data:a,timeout:7e3,headers:p}).then(function(n){if(200===n.status&&n.data&&0===n.data.returnCode)if(n.data.encript){var e=n.data.data,t=d.AES.decrypt(e,"lian");e=JSON.parse(t.toString(d.enc.Utf8)),n.data.data=e,i(n.data)}else i(n.data);else if(200===n.status&&n.data&&0!==n.data.returnCode){var a={errCode:n.data.returnCode,errMsg:n.data.returnMsg};c(a)}else c({errCode:-1,errMsg:"请求失败"})}).catch(function(n){log(n),c({errCode:-1,errMsg:"请求失败"})});case 5:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}())},p=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=Object.keys(e);return n=0===a.length?n:n+"?"+a.map(function(n){return encodeURIComponent(n)+"="+encodeURIComponent(e[n])}).join("&"),u({url:n,data:{},method:"get",isFullURL:t})},h=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return u({url:n,data:e,method:"post"})}},Cs0Q:function(n,e,t){"use strict";t.d(e,"a",function(){return a});var a=function(n){return{type:"SET_KEKE_TRAIN",value:n}}},MQX1:function(n,e,t){"use strict";t.d(e,"b",function(){return a}),t.d(e,"a",function(){return r});var a=function(n){var e=document.createElement("div");return e.innerHTML=n,e.textContent||e.innerText||""},r=function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}},Ma61:function(n,e,t){var a=t("zggC");"string"==typeof a&&(a=[[n.i,a,""]]);t("7B2p")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(n.exports=a.locals)},tqVl:function(n,e,t){"use strict";t.r(e);var a=t("smUt"),r=t.n(a),o=(t("IWID"),t("0BXe")),i=t.n(o),c=(t("PAZs"),t("yNfe")),s=t.n(c),l=t("NTxs"),d=t.n(l),u=t("o2MN"),p=t.n(u),h=(t("KW2r"),t("q391")),f=t.n(h),g=t("Z5GD"),m=t.n(g),x=(t("1Osk"),t("vMRr")),v=t.n(x),w=t("Pjwa"),y=t.n(w),b=t("2cji"),k=t.n(b),E=t("sp3j"),S=t.n(E),C=t("vZkh"),N=t.n(C),z=t("+KCP"),R=t.n(z),_=t("rWUz"),L=t.n(_),I=t("ukVl"),M=t.n(I),j=t("rdAL"),T=t.n(j),P=t("FFPy"),A=t.n(P),D=(t("48TQ"),t("4yxy")),q=t("Cs0Q"),O=t("uuwp"),W=t("2taP"),H=(t("MQX1"),t("Ma61"),{0:"#e84118",1:"#00a8ff",2:"#fbc531",3:"#4cd137",4:"#487eb0",5:"#9c88ff"}),Q=["/api/english/keke-collection","/api/english/keke-collection-word"],U=function(n){function e(){var n,t;y()(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return t=S()(this,(n=N()(e)).call.apply(n,[this].concat(r))),M()(L()(L()(t)),"state",{dataBlob:{},dataSource:new v.a.DataSource({rowHasChanged:function(n,e){return n!==e},sectionHeaderHasChanged:function(n,e){return n!==e}}),collection_id:"",collection:{},total:0,collection_questions:[],isTrain:!1,height:document.documentElement.clientHeight,refreshing:!0,isLoading:!1,pageSize:5,pageNo:1,isEnd:0,user_id:""}),M()(L()(L()(t)),"init",function(){t.fetchWords()}),M()(L()(L()(t)),"fetchWords",function(){if(!t.state.isLoading){t.setState({isLoading:!0});var n={pageSize:t.state.pageSize,pageNo:t.state.pageNo};Object(W.a)("".concat(Q[0]),n).then(function(n){var e=n.data.map(function(n){return n}),a=[].concat(m()(t.state.collection_questions),m()(e));t.rData=n.data.map(function(n,e){return e+(t.state.pageNo-1)*t.state.pageSize});var r=t.state.dataBlob;r["".concat(t.state.pageNo)]=t.rData,t.setState({dataBlob:r,dataSource:t.state.dataSource.cloneWithRowsAndSections(r),collection_questions:a,total:n.count,pageNo:parseInt(n.pageNo)+1,isLoading:!1})}).catch(function(n){f.a.info("认证失效",2)})}}),M()(L()(L()(t)),"handleClick",function(n){t.state.isTrain?t.props.history.push("/train-word?collection_id=".concat(n)):t.props.history.push("/learn-word?collection_id=".concat(n))}),M()(L()(L()(t)),"gotoLast",function(){t.props.history.go(-1)}),M()(L()(L()(t)),"onEndReached",function(n){var e=t.state,a=e.total,r=e.pageNo,o=e.pageSize;a<=r*o-o?t.setState({isEnd:1}):t.fetchWords()}),M()(L()(L()(t)),"onScroll",function(n){t.lv.listviewRef.scrollProperties.offset+t.lv.listviewRef.scrollProperties.visibleLength>=t.lv.listviewRef.scrollProperties.contentLength&&t.onEndReached()}),M()(L()(L()(t)),"phoneticSound",function(n,e){new Audio(imageHost+"/"+n.pronunciation_url).play(),e.stopPropagation()}),M()(L()(L()(t)),"syncReduxData",function(){var n=p()(d.a.mark(function n(e){var a;return d.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a={collection_id:t.state.collection_id,equal:1,pageSize:parseInt(t.state.total),pageNo:1},n.next=3,Object(W.a)("".concat(Q[1]),a);case 3:n.sent.data.map(function(n){return n}),t.props.history.push(e);case 6:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()),M()(L()(L()(t)),"lookExam",function(){f.a.info("暂不开放")}),M()(L()(L()(t)),"takeExam",function(){t.syncReduxData("/take-exam")}),M()(L()(L()(t)),"handleItem",function(n,e,a){var r={collection:{total:t.state.total,current:a+1}};t.props.setValue(r),t.props.history.push("/keke-one-collection?collection_id=".concat(e.id)),log(e)}),t}return R()(e,n),k()(e,[{key:"componentDidMount",value:function(){var n=this.state.height-A.a.findDOMNode(this.lv).offsetTop;this.setState({height:n}),this.rData=[],this.init()}},{key:"render",value:function(){var n=this,e=T.a.createElement(i.a,{mode:"light",onLeftClick:this.gotoLast,leftContent:T.a.createElement(s.a,{type:"left"}),rightContent:[T.a.createElement(s.a,{key:"1",type:"ellipsis"})]},"Come on"),t=T.a.createElement("div",{className:"header-container"},T.a.createElement("h2",null,"可可词库"),T.a.createElement("div",{className:"header"},T.a.createElement("div",{className:"title"},"精致词库",T.a.createElement("p",null,"试验版"," ",T.a.createElement("span",null,"[总",this.state.total,"库]"))))),a=T.a.createElement(v.a,{useBodyScroll:!0,renderSectionWrapper:function(n){return T.a.createElement(D.StickyContainer,{key:"s_".concat(n,"_c"),className:"sticky-container",style:{zIndex:4}})},renderSectionHeader:function(n,e){return T.a.createElement(D.Sticky,null,function(n){var t=n.style;return T.a.createElement("div",{className:"sticky",style:r()({},t,{zIndex:3,backgroundColor:H[parseInt(e)%5],color:"white"})},"第 ",e," 组")})},className:"list",ref:function(e){return n.lv=e},dataSource:this.state.dataSource,style:{height:this.state.height},renderRow:function(e,t,a){return T.a.createElement("div",{className:"cell",onClick:function(t){return n.handleItem(t,n.state.collection_questions[parseInt(e)],e)}},T.a.createElement("div",null,T.a.createElement("p",{className:"title"},n.state.collection_questions[parseInt(e)].note," "),T.a.createElement("p",null,n.state.collection_questions[parseInt(e)].name," ")))},pageSize:5,initialListSize:10,onEndReached:this.onEndReached,onEndReachedThreshold:500,onScroll:this.onScroll,renderFooter:function(){return T.a.createElement("div",{style:{lineHeight:"30px",textAlign:"center"}},n.state.isLoading?"Loading...":n.state.isEnd?"到达底部":"已加载")}});return T.a.createElement("div",{className:"share-word-container"},e,t,a)}}]),e}(j.Component);e.default=Object(O.b)(function(n){return{redux:n.kekeTrain}},function(n){return{setValue:function(e){n(Object(q.a)(e))}}})(U)},zggC:function(n,e,t){(n.exports=t("aQ7W")(!1)).push([n.i,".share-word-container {\n  margin-top: 5px;\n}\n.share-word-container .header-container h2 {\n  border-bottom: 1px solid #ddd;\n  line-height: 40px;\n  margin: 20px 10px 0 10px;\n  text-align: center;\n}\n.share-word-container .sticky-container .am-list-item {\n  padding: 0;\n  background-color: transparent;\n}\n.share-word-container .sticky-container .am-list-item * {\n  padding: 0;\n  margin: 0;\n}\n.share-word-container .sticky-container .sticky {\n  text-align: center;\n  line-height: 35px;\n}\n.share-word-container .entry {\n  font-size: 16px;\n  line-height: 40px;\n  padding: 10px 10px 0px 10px;\n  margin-bottom: 20px;\n  border-bottom: 1px solid #ddd;\n}\n.share-word-container .entry .btn-container {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n}\n.share-word-container .entry .btn-container a.am-button {\n  display: inline-block;\n  width: 150px;\n  height: 35px;\n  line-height: 35px;\n  margin-right: 10px;\n  font-size: 15px;\n}\n.share-word-container .header {\n  font-size: 16px;\n  line-height: 40px;\n  padding: 10px 10px 0px 10px;\n  border-bottom: 1px solid #ddd;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.share-word-container .header .title {\n  display: inline-block;\n}\n.share-word-container .header .title p {\n  font-size: 14px;\n  color: #666;\n  margin: 0;\n  margin-left: 5px;\n  line-height: 30px;\n}\n.share-word-container .header .title p span {\n  font-size: 12px;\n  margin-left: 5px;\n  color: #65d139;\n}\n.share-word-container .header .switch {\n  display: inline-block;\n  font-size: 14px;\n}\n.share-word-container .list {\n  background: transparent;\n  padding: 10px 10px 0 10px;\n  font-size: 16px;\n  line-height: 30px;\n}\n.share-word-container .list .am-list-body,\n.share-word-container .list .am-list-body::before {\n  background: transparent;\n}\n.share-word-container .list .cell {\n  border-bottom: 1px solid #ddd;\n  margin-bottom: 10px;\n  padding-bottom: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 14px;\n}\n.share-word-container .list .cell .sound-image {\n  width: 30px;\n  margin-right: 10px;\n  padding: 10px;\n}\n.share-word-container .list .cell .grey {\n  color: #666;\n}\n.share-word-container .list .cell .title {\n  font-size: 14px;\n  color: #65d139;\n}\n.share-word-container .list .cell p {\n  margin: 0;\n}\n.share-word-container .list .cell p span {\n  margin-left: 10px;\n}\n",""])}}]);
//# sourceMappingURL=7.de6345ef3af8d75ef547.js.map