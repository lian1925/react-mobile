(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"2taP":function(e,t,n){"use strict";var o=n("NTxs"),a=n.n(o),i=n("o2MN"),r=n.n(i),c=n("f0Pt"),l=n.n(c),s=n("48TQ");n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f});var d=n("fus+"),u=function(e){var t=e.method,n=e.url,o=e.data,i=e.isFullURL;return new Promise(function(){var e=r()(a.a.mark(function e(r,c){var u,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:log(1,i),n=i?n:"http://39.108.194.159:8080"+n,u=Object(s.a)("token"),p={Authorization:u},l()({method:t,url:n,data:o,timeout:7e3,headers:p}).then(function(e){if(200===e.status&&e.data&&0===e.data.returnCode)if(e.data.encript){var t=e.data.data,n=d.AES.decrypt(t,"lian");t=JSON.parse(n.toString(d.enc.Utf8)),e.data.data=t,r(e.data)}else r(e.data);else if(200===e.status&&e.data&&0!==e.data.returnCode){var o={errCode:e.data.returnCode,errMsg:e.data.returnMsg};c(o)}else c({errCode:-1,errMsg:"请求失败"})}).catch(function(e){log(e),c({errCode:-1,errMsg:e})});case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},p=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=Object.keys(t);return e=0===o.length?e:e+"?"+o.map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),u({url:e,data:{},method:"get",isFullURL:n})},f=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return u({url:e,data:t,method:"post"})}},Cs0Q:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(e){return{type:"SET_KEKE_TRAIN",value:e}}},Ma61:function(e,t,n){var o=n("zggC");"string"==typeof o&&(o=[[e.i,o,""]]);n("7B2p")(o,{hmr:!0,transform:void 0,insertInto:void 0}),o.locals&&(e.exports=o.locals)},tqVl:function(e,t,n){"use strict";n.r(t);var o=n("smUt"),a=n.n(o),i=(n("IWID"),n("0BXe")),r=n.n(i),c=(n("PAZs"),n("yNfe")),l=n.n(c),s=n("Z5GD"),d=n.n(s),u=(n("KW2r"),n("q391")),p=n.n(u),f=(n("1Osk"),n("vMRr")),h=n.n(f),g=n("Pjwa"),m=n.n(g),k=n("2cji"),v=n.n(k),x=n("sp3j"),y=n.n(x),b=n("vZkh"),E=n.n(b),S=n("+KCP"),w=n.n(S),C=n("rWUz"),N=n.n(C),z=n("ukVl"),R=n.n(z),_=n("rdAL"),I=n.n(_),L=n("FFPy"),j=n.n(L),P=n("4yxy"),M=n("48TQ"),O=n("Cs0Q"),W=n("uuwp"),T=n("2taP"),q=(n("Ma61"),{0:"#e84118",1:"#00a8ff",2:"#fbc531",3:"#4cd137",4:"#487eb0",5:"#9c88ff"}),A=function(e){var t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,o){t[n]=o}),t},D=["/api/english/keke-collection","/api/english/keke-collection-word"],U=function(e){function t(){var e,n;m()(this,t);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=y()(this,(e=E()(t)).call.apply(e,[this].concat(a))),R()(N()(N()(n)),"state",{dataBlob:{},dataSource:new h.a.DataSource({rowHasChanged:function(e,t){return e!==t},sectionHeaderHasChanged:function(e,t){return e!==t}}),collection_id:"",collection:{},total:0,collection_questions:[],isTrain:!1,height:document.documentElement.clientHeight,refreshing:!0,isLoading:!1,pageSize:5,pageNo:1,isEnd:0,user_id:"",collection_name:""}),R()(N()(N()(n)),"init",function(){if(Object(M.a)("user"))n.fetchWords();else{var e=n.props.location.search,t=A(e).collection_name,o=A(e).token;if(log(n.props),void 0===o)return void p.a.info("授权失效",2);Object(M.b)("token",o),n.state.collection_name=decodeURIComponent(t),n.fetchWords()}}),R()(N()(N()(n)),"fetchWords",function(){if(!n.state.isLoading){n.setState({isLoading:!0});var e={name:n.state.collection_name,pageSize:n.state.pageSize,pageNo:n.state.pageNo};Object(T.a)("".concat(D[0]),e).then(function(e){var t=e.data.map(function(e){return e}),o=[].concat(d()(n.state.collection_questions),d()(t));n.rData=e.data.map(function(e,t){return t+(n.state.pageNo-1)*n.state.pageSize});var a=n.state.dataBlob;a["".concat(n.state.pageNo)]=n.rData,n.setState({dataBlob:a,dataSource:n.state.dataSource.cloneWithRowsAndSections(a),collection_questions:o,total:e.count,pageNo:parseInt(e.pageNo)+1,isLoading:!1})}).catch(function(e){p.a.info("认证失效",5)})}}),R()(N()(N()(n)),"gotoLast",function(){n.props.history.go(-1)}),R()(N()(N()(n)),"onEndReached",function(e){var t=n.state,o=t.total,a=t.pageNo,i=t.pageSize;o<=a*i-i?n.setState({isEnd:1}):n.fetchWords()}),R()(N()(N()(n)),"onScroll",function(e){n.lv.listviewRef.scrollProperties.offset+n.lv.listviewRef.scrollProperties.visibleLength>=n.lv.listviewRef.scrollProperties.contentLength&&n.onEndReached()}),R()(N()(N()(n)),"handleItem",function(e,t,o){var a={collection:{total:n.state.total,current:o+1},entryPath:window.location.href};n.props.setValue(a),n.props.history.push("/keke-one-collection?collection_id=".concat(t.id)),log(t)}),n}return w()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this.state.height-j.a.findDOMNode(this.lv).offsetTop;this.setState({height:e}),this.rData=[],this.init()}},{key:"render",value:function(){var e=this,t=I.a.createElement(r.a,{mode:"light",onLeftClick:this.gotoLast,leftContent:I.a.createElement(l.a,{type:"left"}),rightContent:[I.a.createElement(l.a,{key:"1",type:"ellipsis"})]},"Come on"),n=I.a.createElement("div",{className:"top"},I.a.createElement("h2",null,"词汇小私塾"),I.a.createElement("div",{className:"header"},I.a.createElement("div",{className:"title"},"业精于勤疏于惰",I.a.createElement("p",null,"勤练版"," ",I.a.createElement("span",null,"[总",this.state.total,"库]"))))),o=I.a.createElement(h.a,{useBodyScroll:!0,renderSectionWrapper:function(e){return I.a.createElement(P.StickyContainer,{key:"s_".concat(e,"_c"),className:"sticky-container",style:{zIndex:4}})},renderSectionHeader:function(e,t){return I.a.createElement(P.Sticky,null,function(e){var n=e.style;return I.a.createElement("div",{className:"sticky",style:a()({},n,{zIndex:3,backgroundColor:q[parseInt(t)%5],color:"white"})},"第 ",t," 组")})},className:"list",ref:function(t){return e.lv=t},dataSource:this.state.dataSource,style:{height:this.state.height},renderRow:function(t,n,o){return I.a.createElement("div",{className:"cell",onClick:function(n){return e.handleItem(n,e.state.collection_questions[parseInt(t)],t)}},I.a.createElement("div",null,I.a.createElement("p",{className:"title"},e.state.collection_questions[parseInt(t)].note," "),I.a.createElement("p",null,e.state.collection_questions[parseInt(t)].name," ")))},pageSize:5,initialListSize:10,onEndReached:this.onEndReached,onEndReachedThreshold:500,onScroll:this.onScroll,renderFooter:function(){return I.a.createElement("div",{style:{lineHeight:"30px",textAlign:"center"}},e.state.isLoading?"Loading...":e.state.isEnd?"到达底部":"已加载")}});return I.a.createElement("div",{className:"keke-collection"},t,n,o)}}]),t}(_.Component);t.default=Object(W.b)(function(e){return{redux:e.kekeTrain}},function(e){return{setValue:function(t){e(Object(O.a)(t))}}})(U)},zggC:function(e,t,n){(e.exports=n("aQ7W")(!1)).push([e.i,".keke-collection {\n  margin-top: 5px;\n}\n.keke-collection .sticky-container .am-list-item {\n  padding: 0;\n  background-color: transparent;\n}\n.keke-collection .sticky-container .am-list-item * {\n  padding: 0;\n  margin: 0;\n}\n.keke-collection .sticky-container .sticky {\n  text-align: center;\n  line-height: 35px;\n}\n.keke-collection .top h2 {\n  border-bottom: 1px solid #ddd;\n  line-height: 40px;\n  margin: 20px 10px 0 10px;\n  text-align: center;\n}\n.keke-collection .top .header {\n  font-size: 16px;\n  line-height: 40px;\n  padding: 10px 10px 0px 10px;\n  border-bottom: 1px solid #ddd;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.keke-collection .top .header .title {\n  display: inline-block;\n}\n.keke-collection .top .header .title p {\n  font-size: 14px;\n  color: #666;\n  margin: 0;\n  margin-left: 5px;\n  line-height: 30px;\n}\n.keke-collection .top .header .title p span {\n  font-size: 12px;\n  margin-left: 5px;\n  color: #65d139;\n}\n.keke-collection .list {\n  background: transparent;\n  padding: 10px 10px 0 10px;\n  font-size: 16px;\n  line-height: 30px;\n}\n.keke-collection .list .am-list-body,\n.keke-collection .list .am-list-body::before {\n  background: transparent;\n}\n.keke-collection .list .cell {\n  border-bottom: 1px solid #ddd;\n  margin-bottom: 10px;\n  padding-bottom: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 14px;\n}\n.keke-collection .list .cell .sound-image {\n  width: 30px;\n  margin-right: 10px;\n  padding: 10px;\n}\n.keke-collection .list .cell .grey {\n  color: #666;\n}\n.keke-collection .list .cell .title {\n  font-size: 14px;\n  color: #65d139;\n}\n.keke-collection .list .cell p {\n  margin: 0;\n}\n.keke-collection .list .cell p span {\n  margin-left: 10px;\n}\n",""])}}]);
//# sourceMappingURL=8.c8a96b10386cc11cecb1.js.map