{"version":3,"sources":["webpack:///./src/views/login/index.less","webpack:///./src/util/fetch.js","webpack:///./src/util/constant.js","webpack:///./src/util/store.js","webpack:///./src/views/login/index.less?0628","webpack:///./src/views/login/index.js"],"names":["module","exports","__webpack_require__","push","i","2taP","n","t","e","o","u","r","a","c","l","d","f","CryptoJS","require","Ajax","_ref","method","url","data","isFullURL","Promise","_ref2","asyncToGenerator_default","regenerator_default","mark","_callee","resolve","reject","token","headers","wrap","_context","prev","next","log","getStore","Authorization","axios","timeout","then","res","status","returnCode","encript","bytes","AES","decrypt","JSON","parse","toString","enc","Utf8","err","errCode","errMsg","returnMsg","catch","error","stop","this","_x","_x2","apply","arguments","get","length","array","Object","keys","map","item","encodeURIComponent","join","post","48TQ","__webpack_exports__","setStore","name","content","stringify","window","sessionStorage","setItem","getItem","hmr","transform","insertInto","locals","index","user","password","buttonDisable","b","g","type","_this$state","_this","state","setState","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default","target","value","keyCode","login","_this$state2","message","info","Interceptor","_this$state3","success","props","history","warn","_this2","_this$state4","react__WEBPACK_IMPORTED_MODULE_7___default","createElement","className","placeholder","onChange","handleChange","onKeyDown","handleKeyDown","antd__WEBPACK_IMPORTED_MODULE_9__","loading","onClick","Component"],"mappings":"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","file":"4.af239220a683d48fd3ed.js","sourcesContent":["exports = module.exports = require(\"../../../node_modules/_css-loader@1.0.1@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".login-container {\\n  height: 100vh;\\n  width: 100%;\\n  background: #2d3a4b;\\n  display: flex;\\n  justify-content: center;\\n  align-content: center;\\n  flex-direction: column;\\n}\\n.login-container .form-box {\\n  width: 380px;\\n  margin: 0 auto;\\n  height: 380px;\\n  background: white;\\n  border-radius: 10px;\\n  text-align: center;\\n}\\n.login-container .form-box .title-box {\\n  border-bottom: 1px solid #dddddd;\\n  line-height: 110px;\\n  text-align: left;\\n}\\n.login-container .form-box .title-box .title {\\n  font-size: 30px;\\n  color: #373d41;\\n  margin-left: 40px;\\n  padding-left: 40px;\\n  width: 100%;\\n}\\n.login-container .form-box input {\\n  margin-top: 18px;\\n  width: 300px;\\n  border: none;\\n  border-bottom: 1px solid #dddddd;\\n  padding-left: 32px;\\n  font-size: 14px;\\n  line-height: 38px;\\n}\\n.login-container .form-box input:focus {\\n  outline: none;\\n  border-bottom: 1px solid rgba(0, 120, 255, 0.5);\\n}\\n.login-container .form-box button {\\n  display: block;\\n  width: 300px;\\n  height: 60px;\\n  margin: 0 auto;\\n  margin-top: 40px;\\n  border-radius: 30px;\\n  background: linear-gradient(-180deg, #0078ff 0%, #005aff 100%);\\n  box-shadow: 0 4px 20px 0 rgba(0, 120, 255, 0.5);\\n  color: white;\\n  font-size: 18px;\\n  cursor: pointer;\\n}\\n.login-container .form-box button:focus {\\n  outline: none;\\n}\\n.login-container .form-box button:hover {\\n  box-shadow: 0 4px 20px 0 rgba(0, 120, 255, 0.3);\\n  background: linear-gradient(90deg, #0078ff 0%, #005aff 100%);\\n}\\n\", \"\"]);\n\n// exports\n","import { BASE_URL, RESPONSE_OK } from \"./constant\";\nimport axios from \"axios\";\nimport { setStore, getStore, removeStore } from \"./store\";\nvar CryptoJS = require(\"crypto-js\");\nconst secretKey = \"lian\";\n\nconst Ajax = ({ method, url, data, isFullURL }) =>\n  new Promise(async (resolve, reject) => {\n    log(1, isFullURL);\n    url = isFullURL ? url : BASE_URL + url;\n\n    const token = getStore(\"token\");\n    const headers = {\n      Authorization: token\n    };\n    axios({\n      method,\n      url,\n      data,\n      timeout: 7000,\n      headers\n    })\n      .then(res => {\n        if (\n          res.status === 200 &&\n          res.data &&\n          res.data.returnCode === RESPONSE_OK\n        ) {\n          if (res.data.encript) {\n            let data = res.data.data;\n            let bytes = CryptoJS.AES.decrypt(data, secretKey);\n            data = JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\n            res.data.data = data;\n            resolve(res.data);\n          } else {\n            resolve(res.data);\n          }\n        } else if (\n          res.status === 200 &&\n          res.data &&\n          res.data.returnCode !== RESPONSE_OK\n        ) {\n          const err = {\n            errCode: res.data.returnCode,\n            errMsg: res.data.returnMsg\n          };\n          reject(err);\n        } else {\n          const err = {\n            errCode: -1,\n            errMsg: \"请求失败\"\n          };\n          reject(err);\n        }\n      })\n      .catch(error => {\n        log(error);\n        const err = {\n          errCode: -1,\n          errMsg: error\n        };\n        reject(err);\n      });\n  });\nconst get = (url, data = {}, isFullURL = false) => {\n  const array = Object.keys(data);\n  url =\n    array.length === 0\n      ? url\n      : url +\n        \"?\" +\n        array\n          .map(\n            item =>\n              encodeURIComponent(item) + \"=\" + encodeURIComponent(data[item])\n          )\n          .join(\"&\");\n  return Ajax({\n    url,\n    data: {},\n    method: \"get\",\n    isFullURL\n  });\n};\n\nconst post = (url, data = {}) =>\n  Ajax({\n    url,\n    data,\n    method: \"post\"\n  });\n\nconst put = (url, data = {}) =>\n  Ajax({\n    url,\n    data,\n    method: \"put\"\n  });\n\nconst deletRequest = (url, data = {}) =>\n  Ajax({\n    url,\n    data,\n    method: \"delete\"\n  });\nexport { get, post, put, deletRequest };\n","const hosts = [\"http://localhost:8080\", \"http://39.108.194.159:8080\"];\n\nconst BASE_URL = hosts[1];\nconst RESPONSE_OK = 0;\nexport { BASE_URL, RESPONSE_OK };\n","/**\n * 存储sessionStorage\n */\nconst setStore = (name, content) => {\n  if (!name) return;\n  if (typeof content !== \"string\") {\n    content = JSON.stringify(content);\n  }\n  window.sessionStorage.setItem(name, content);\n};\n\n/**\n * 获取sessionStorage\n */\nconst getStore = name => {\n  if (!name) return;\n  return window.sessionStorage.getItem(name);\n};\n\n/**\n * 删除sessionStorage\n */\nconst removeStore = name => {\n  if (!name) return;\n  window.sessionStorage.removeItem(name);\n};\n\nexport { setStore, getStore, removeStore };\n","\nvar content = require(\"!!../../../node_modules/_css-loader@1.0.1@css-loader/index.js!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--7-2!./index.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/_style-loader@0.23.1@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/_css-loader@1.0.1@css-loader/index.js!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--7-2!./index.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/_css-loader@1.0.1@css-loader/index.js!../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js??ref--7-2!./index.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React, { Component } from \"react\";\nimport { message, Button } from \"antd\";\nimport { get, post } from \"util/fetch\";\nimport \"./index.less\";\nimport { setStore, getStore, removeStore } from \"util/store\";\n\nexport default class index extends Component {\n  state = {\n    user: \"lian\",\n    password: \"english\",\n    buttonDisable: false\n  };\n  handleChange = (e, type) => {\n    let { user, password, buttonDisable } = this.state;\n    // this.state[type] ß= e.target.value;\n    this.setState({\n      [type]: e.target.value\n    });\n  };\n  handleKeyDown = e => {\n    if (e.keyCode == 13) {\n      this.login();\n    }\n  };\n  Interceptor = () => {\n    let { user, password } = this.state;\n\n    if (user.length === 0) {\n      message.info(\"请输入账号\");\n      return false;\n    }\n    if (password === 0) {\n      message.info(\"请输入密码\");\n      return false;\n    }\n    return true;\n  };\n  login = e => {\n    // alert(2);\n    if (!this.Interceptor()) {\n      return;\n    }\n    this.setState({\n      buttonDisable: true\n    });\n    let { user, password } = this.state;\n    post(\"/api/admin/login\", { user, password })\n      .then(res => {\n        setStore(\"token\", res.data.token);\n        setStore(\"user\", user);\n        message.success(res.data.returnMsg);\n        this.props.history.push(\"/keke-collection\");\n      })\n      .catch(err => {\n        this.setState({\n          buttonDisable: false\n        });\n        message.warn(err.errMsg);\n      });\n  };\n  render() {\n    const { user, password, buttonDisable } = this.state;\n    return (\n      <div className=\"login-container\">\n        <div className=\"form-box\">\n          <div className=\"title-box\">\n            <div className=\"title\">用户登录 </div>\n          </div>\n          <input\n            className=\"input-user\"\n            type=\"text\"\n            placeholder=\"账号\"\n            value={user}\n            onChange={e => this.handleChange(e, \"user\")}\n          />\n          <input\n            className=\"input-password\"\n            type=\"password\"\n            placeholder=\"密码\"\n            value={password}\n            onChange={e => this.handleChange(e, \"password\")}\n            onKeyDown={this.handleKeyDown}\n          />\n\n          <Button loading={buttonDisable} onClick={this.login}>\n            登录\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}