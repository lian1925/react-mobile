(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2taP":function(e,t,n){"use strict";var a=n("NTxs"),i=n.n(a),r=n("o2MN"),o=n.n(r),c=n("f0Pt"),s=n.n(c),l=n("48TQ");n.d(t,"a",function(){return u}),n.d(t,"b",function(){return h});var d=n("fus+"),p=function(e){var t=e.method,n=e.url,a=e.data,r=e.isFullURL;return new Promise(function(){var e=o()(i.a.mark(function e(o,c){var p,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:log(1,r),n=r?n:"http://39.108.194.159:8080"+n,p=Object(l.a)("token"),u={Authorization:p},s()({method:t,url:n,data:a,timeout:7e3,headers:u}).then(function(e){if(200===e.status&&e.data&&0===e.data.returnCode)if(e.data.encript){var t=e.data.data,n=d.AES.decrypt(t,"lian");t=JSON.parse(n.toString(d.enc.Utf8)),e.data.data=t,o(e.data)}else o(e.data);else if(200===e.status&&e.data&&0!==e.data.returnCode){var a={errCode:e.data.returnCode,errMsg:e.data.returnMsg};c(a)}else c({errCode:-1,errMsg:"请求失败"})}).catch(function(e){log(e),c({errCode:-1,errMsg:"请求失败"})});case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}())},u=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],a=Object.keys(t);return e=0===a.length?e:e+"?"+a.map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&"),p({url:e,data:{},method:"get",isFullURL:n})},h=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return p({url:e,data:t,method:"post"})}},Cs0Q:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){return{type:"SET_KEKE_TRAIN",value:e}}},I6WA:function(e,t,n){var a=n("Y5jc");"string"==typeof a&&(a=[[e.i,a,""]]);n("7B2p")(a,{hmr:!0,transform:void 0,insertInto:void 0}),a.locals&&(e.exports=a.locals)},MQX1:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return i});var a=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},i=function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)}},RdvZ:function(e,t,n){"use strict";n.r(t);var a=n("smUt"),i=n.n(a),r=(n("JrXl"),n("amw4")),o=n.n(r),c=(n("IWID"),n("0BXe")),s=n.n(c),l=(n("PAZs"),n("yNfe")),d=n.n(l),p=n("NTxs"),u=n.n(p),h=n("o2MN"),f=n.n(h),m=(n("KW2r"),n("q391")),g=n.n(m),k=n("Z5GD"),x=n.n(k),v=(n("1Osk"),n("vMRr")),y=n.n(v),b=n("Pjwa"),E=n.n(b),w=n("2cji"),S=n.n(w),N=n("sp3j"),_=n.n(N),C=n("vZkh"),z=n.n(C),j=n("+KCP"),R=n.n(j),I=n("rWUz"),L=n.n(I),T=n("ukVl"),M=n.n(T),A=n("rdAL"),O=n.n(A),P=n("FFPy"),W=n.n(P),q=(n("48TQ"),n("4yxy")),D=n("Cs0Q"),H=n("uuwp"),B=n("2taP"),Q=n("MQX1"),U=(n("I6WA"),{0:"#e84118",1:"#00a8ff",2:"#fbc531",3:"#4cd137",4:"#487eb0",5:"#9c88ff"}),F=["/api/english/keke-collection","/api/english/keke-collection-word"],J=function(e){function t(){var e,n;E()(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return n=_()(this,(e=z()(t)).call.apply(e,[this].concat(i))),M()(L()(L()(n)),"state",{dataBlob:{},dataSource:new y.a.DataSource({rowHasChanged:function(e,t){return e!==t},sectionHeaderHasChanged:function(e,t){return e!==t}}),collection_id:"",collection:{},total:0,collection_questions:[],isTrain:!1,height:document.documentElement.clientHeight,refreshing:!0,isLoading:!1,pageSize:5,pageNo:1,isEnd:0,user_id:""}),M()(L()(L()(n)),"init",function(){var e=function(e){var t={};return n.props.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,a){t[n]=a}),t}().collection_id;n.state.collection_id=e,Object(B.a)("".concat(F[0],"/").concat(e)).then(function(e){n.setState({collection:e.data[0]})}),n.fetchWords()}),M()(L()(L()(n)),"fetchWords",function(){if(!n.state.isLoading){n.setState({isLoading:!0});var e={collection_id:n.state.collection_id,equal:1,pageSize:n.state.pageSize,pageNo:n.state.pageNo};Object(B.a)("".concat(F[1]),e).then(function(e){var t=e.data.map(function(e){return e.content=Object(Q.b)(e.content),e.analysis=Object(Q.b)(e.analysis),e}),a=[].concat(x()(n.state.collection_questions),x()(t));n.rData=e.data.map(function(e,t){return t+(n.state.pageNo-1)*n.state.pageSize});var i=n.state.dataBlob;i["".concat(n.state.pageNo)]=n.rData,n.setState({dataBlob:i,dataSource:n.state.dataSource.cloneWithRowsAndSections(i),collection_questions:a,total:e.count,pageNo:parseInt(e.pageNo)+1,isLoading:!1})}).catch(function(e){g.a.info("认证失效",2)})}}),M()(L()(L()(n)),"handleClick",function(e){n.state.isTrain?n.props.history.push("/train-word?collection_id=".concat(e)):n.props.history.push("/learn-word?collection_id=".concat(e))}),M()(L()(L()(n)),"gotoLast",function(){n.props.history.go(-1)}),M()(L()(L()(n)),"onEndReached",function(e){var t=n.state,a=t.total,i=t.pageNo,r=t.pageSize;a<=i*r-r?n.setState({isEnd:1}):n.fetchWords()}),M()(L()(L()(n)),"onScroll",function(e){n.lv.listviewRef.scrollProperties.offset+n.lv.listviewRef.scrollProperties.visibleLength>=n.lv.listviewRef.scrollProperties.contentLength&&n.onEndReached()}),M()(L()(L()(n)),"phoneticSound",function(e,t){new Audio(imageHost+"/"+e.pronunciation_url).play(),t.stopPropagation()}),M()(L()(L()(n)),"syncReduxData",function(){var e=f()(u.a.mark(function e(t){var a,i,r,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={collection_id:n.state.collection_id,equal:1,pageSize:parseInt(n.state.total),pageNo:1},e.next=3,Object(B.a)("".concat(F[1]),a);case 3:i=e.sent,r=i.data.map(function(e){return e.profile_picture_url="https://jiguangdanci.easylesson.cn//uploads/2b3b57f84122a4aa7d888d171b0ecf7c.jpg",e}),o={wordList:r,collection_info:n.state.collection},n.props.setValue(o),n.props.history.push(t);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),M()(L()(L()(n)),"lookExam",function(){g.a.info("暂不开放")}),M()(L()(L()(n)),"takeExam",function(){n.syncReduxData("/train-keke")}),M()(L()(L()(n)),"handleItem",function(e,t){new Audio(t.pronunciation_url).play()}),n}return R()(t,e),S()(t,[{key:"componentDidMount",value:function(){var e=this.state.height-W.a.findDOMNode(this.lv).offsetTop;this.setState({height:e}),this.rData=[],this.init()}},{key:"render",value:function(){var e=this,t=O.a.createElement(s.a,{mode:"light",onLeftClick:this.gotoLast,leftContent:O.a.createElement(d.a,{type:"left"}),rightContent:[O.a.createElement(d.a,{key:"1",type:"ellipsis"})]},"Come on"),n=O.a.createElement("div",{className:"header-container"},O.a.createElement("h2",null,"可可词汇"),O.a.createElement("div",{className:"header"},O.a.createElement("div",{className:"title"},this.state.collection.name,O.a.createElement("span",{className:"tip-render"},"[",this.props.kekeTrain.collection.current,"/",this.props.kekeTrain.collection.total,"]"),O.a.createElement("p",null,this.state.collection.note," ",O.a.createElement("span",null,"[",this.state.total,"词汇]")))),O.a.createElement("div",{className:"entry"},O.a.createElement("div",null,O.a.createElement("div",null,"学习模式"),O.a.createElement("div",{className:"btn-container"},O.a.createElement("div",null,O.a.createElement(o.a,{onClick:this.takeExam,style:{background:" RGB(101, 209, 57)"},type:"primary"},"练习")),O.a.createElement("div",null,O.a.createElement(o.a,{onClick:this.lookExam,className:"remember",type:"primary"},"背词")))))),a=O.a.createElement(y.a,{useBodyScroll:!0,renderSectionWrapper:function(e){return O.a.createElement(q.StickyContainer,{key:"s_".concat(e,"_c"),className:"sticky-container",style:{zIndex:4}})},renderSectionHeader:function(e,t){return O.a.createElement(q.Sticky,null,function(e){var n=e.style;return O.a.createElement("div",{className:"sticky",style:i()({},n,{zIndex:3,backgroundColor:U[parseInt(t)%5],color:"white"})},"第 ",t," 组")})},className:"list",ref:function(t){return e.lv=t},dataSource:this.state.dataSource,style:{height:this.state.height},renderRow:function(t,n,a){return O.a.createElement("div",{className:"cell",onClick:function(n){return e.handleItem(n,e.state.collection_questions[parseInt(t)])}},O.a.createElement("div",null,O.a.createElement("p",null,e.state.collection_questions[parseInt(t)].word," ",e.state.collection_questions[parseInt(t)].phonetic_symbol),O.a.createElement("p",{className:"title"},e.state.collection_questions[parseInt(t)].definition)))},pageSize:5,initialListSize:10,onEndReached:this.onEndReached,onEndReachedThreshold:500,onScroll:this.onScroll,renderFooter:function(){return O.a.createElement("div",{style:{lineHeight:"30px",textAlign:"center"}},e.state.isLoading?"Loading...":e.state.isEnd?"到达底部":"已加载")}});return O.a.createElement("div",{className:"train-keke"},t,n,a)}}]),t}(A.Component);t.default=Object(H.b)(function(e){return{kekeTrain:e.kekeTrain}},function(e){return{setValue:function(t){e(Object(D.a)(t))}}})(J)},Y5jc:function(e,t,n){(e.exports=n("aQ7W")(!1)).push([e.i,".train-keke {\n  margin-top: 5px;\n}\n.train-keke .header-container h2 {\n  border-bottom: 1px solid #ddd;\n  line-height: 40px;\n  margin: 20px 10px 0 10px;\n  text-align: center;\n}\n.train-keke .sticky-container .am-list-item {\n  padding: 0;\n  background-color: transparent;\n}\n.train-keke .sticky-container .am-list-item * {\n  padding: 0;\n  margin: 0;\n}\n.train-keke .sticky-container .sticky {\n  text-align: center;\n  line-height: 35px;\n}\n.train-keke .entry {\n  font-size: 16px;\n  line-height: 40px;\n  padding: 10px 10px 0px 10px;\n  margin-bottom: 20px;\n  border-bottom: 1px solid #ddd;\n}\n.train-keke .entry .btn-container {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n}\n.train-keke .entry .btn-container a.am-button {\n  display: inline-block;\n  width: 150px;\n  height: 35px;\n  line-height: 35px;\n  margin-right: 10px;\n  font-size: 15px;\n}\n.train-keke .header {\n  font-size: 16px;\n  line-height: 40px;\n  padding: 10px 10px 0px 10px;\n  border-bottom: 1px solid #ddd;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.train-keke .header .title {\n  display: inline-block;\n}\n.train-keke .header .title .tip-render {\n  font-size: 12px;\n  margin-left: 5px;\n  color: #65d139;\n}\n.train-keke .header .title p {\n  font-size: 14px;\n  color: #666;\n  margin: 0;\n  margin-left: 5px;\n  line-height: 30px;\n}\n.train-keke .header .title p span {\n  font-size: 12px;\n  margin-left: 5px;\n  color: #65d139;\n}\n.train-keke .header .switch {\n  display: inline-block;\n  font-size: 14px;\n}\n.train-keke .list {\n  background: transparent;\n  padding: 10px 10px 0 10px;\n  font-size: 16px;\n  line-height: 30px;\n}\n.train-keke .list .am-list-body,\n.train-keke .list .am-list-body::before {\n  background: transparent;\n}\n.train-keke .list .cell {\n  border-bottom: 1px solid #ddd;\n  margin-bottom: 10px;\n  padding-bottom: 5px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 14px;\n}\n.train-keke .list .cell .sound-image {\n  width: 30px;\n  margin-right: 10px;\n  padding: 10px;\n}\n.train-keke .list .cell .grey {\n  color: #666;\n}\n.train-keke .list .cell .title {\n  font-size: 14px;\n  color: #65d139;\n}\n.train-keke .list .cell p {\n  margin: 0;\n}\n.train-keke .list .cell p span {\n  margin-left: 10px;\n}\n",""])}}]);
//# sourceMappingURL=6.de6345ef3af8d75ef547.js.map